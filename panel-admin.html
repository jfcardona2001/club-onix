<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Administrador - Club Ã“nix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<h1>Panel Administrador - Club Ã“nix</h1>

<h2>Registrar deportista</h2>

<input id="nombre" placeholder="Nombre del deportista">
<input id="categoria" placeholder="CategorÃ­a">

<h3>Datos del acudiente</h3>
<input id="acudienteNombre" placeholder="Nombre del acudiente">
<input id="acudienteTelefono" placeholder="TelÃ©fono">
<input id="acudienteCorreo" type="email" placeholder="Correo electrÃ³nico">

<button onclick="agregarDeportista()">Agregar deportista</button>


<h2>Lista de deportistas</h2>
<ul id="lista"></ul>

<h2>Registrar pago</h2>
<input id="pagoNombre" placeholder="Nombre del deportista">
<input id="monto" type="number" placeholder="Monto (COP)">
<button onclick="registrarPago()">Registrar pago</button>

<br><br>
<a href="login.html">Cerrar sesiÃ³n</a>

<script>
let deportistas = JSON.parse(localStorage.getItem("deportistas")) || [];

function guardar() {
  localStorage.setItem("deportistas", JSON.stringify(deportistas));
  mostrar();
}

function agregarDeportista() {
  const nombre = document.getElementById("nombre").value;
  const categoria = document.getElementById("categoria").value;

  const acudienteNombre = document.getElementById("acudienteNombre").value;
  const acudienteTelefono = document.getElementById("acudienteTelefono").value;
  const acudienteCorreo = document.getElementById("acudienteCorreo").value;

  if (!nombre) return;

  deportistas.push({
    nombre,
    categoria,
    pago: "Pendiente",
    acudiente: {
      nombre: acudienteNombre,
      telefono: acudienteTelefono,
      correo: acudienteCorreo
    }
  });

  guardar();

  // Limpiar campos
  document.getElementById("nombre").value = "";
  document.getElementById("categoria").value = "";
  document.getElementById("acudienteNombre").value = "";
  document.getElementById("acudienteTelefono").value = "";
  document.getElementById("acudienteCorreo").value = "";
}


function registrarPago() {
  const nombre = document.getElementById("pagoNombre").value;
  const monto = document.getElementById("monto").value;
  deportistas = deportistas.map(d =>
    d.nombre === nombre ? { ...d, pago: "Pagado $ " + monto } : d
  );
  guardar();
}

function enviarWhatsApp(nombre, pago) {
  const mensaje = `Hola ${nombre}, te informamos que tu estado de pago es: ${pago}. Club Deportivo Volleyball Ã“nix.`;
  const url = `https://wa.me/?text=${encodeURIComponent(mensaje)}`;
  window.open(url, "_blank");
}

function enviarCorreo(nombre, pago) {
  const asunto = "Estado de pago - Club Ã“nix";
  const cuerpo = `Hola ${nombre},\n\nTu estado de pago es: ${pago}.\n\nClub Deportivo Volleyball Ã“nix.`;
  const url = `https://mail.google.com/mail/?view=cm&fs=1&su=${encodeURIComponent(asunto)}&body=${encodeURIComponent(cuerpo)}`;
  window.open(url, "_blank");
}

function mostrar() {
  const lista = document.getElementById("lista");
  lista.innerHTML = "";
  deportistas.forEach((d, index) => {
    const li = document.createElement("li");
    li.innerHTML = `
    <button onclick="editarDeportista(${index})">âœï¸ Editar</button>
  <strong>${d.nombre}</strong> - ${d.categoria} - ${d.pago}<br>

  <small>
    ğŸ‘¤ <strong>Acudiente:</strong> ${d.acudiente?.nombre || "No registrado"}<br>
    ğŸ“ <strong>TelÃ©fono:</strong> ${d.acudiente?.telefono || "-"}<br>
    âœ‰ï¸ <strong>Correo:</strong> ${d.acudiente?.correo || "-"}
  </small>
  <br>

  <button onclick="enviarWhatsApp('${d.nombre}','${d.pago}')">ğŸ“² WhatsApp</button>
  <button onclick="enviarCorreo('${d.nombre}','${d.pago}')">âœ‰ï¸ Gmail</button>
`;

    lista.appendChild(li);
  });
}

mostrar();
</script>

mostrar();


</body>
</html>
