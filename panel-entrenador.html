<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Entrenador - Club Ónix</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<h1>Panel del Entrenador</h1>

<h2>Lista de deportistas</h2>
<ul id="lista"></ul>

<a href="login.html">Cerrar sesión</a>

<script>
let deportistas = JSON.parse(localStorage.getItem("deportistas")) || [];

function guardar() {
  localStorage.setItem("deportistas", JSON.stringify(deportistas));
  mostrar();
}

// Función para marcar asistencia por fecha
function marcarAsistencia(index, estado) {
  const fecha = new Date().toLocaleDateString();
  if(!deportistas[index].asistenciaHist) deportistas[index].asistenciaHist = [];
  deportistas[index].asistenciaHist.push({ fecha, estado });
  guardar();
}

function mostrar() {
  const lista = document.getElementById("lista");
  lista.innerHTML = "";

  deportistas.forEach((d, index) => {
    const li = document.createElement("li");

    // Historial de asistencia en texto
    let historial = "";
    if(d.asistenciaHist){
      historial = "<br>Historial: ";
      d.asistenciaHist.forEach(a => {
        historial += `[${a.fecha}: ${a.estado}] `;
      });
    }

    li.innerHTML = `
      <strong>${d.nombre}</strong> - ${d.categoria}<br>
      Asistencia hoy:
      <button onclick="marcarAsistencia(${index}, 'Asistió')">✅</button>
      <button onclick="marcarAsistencia(${index}, 'No asistió')">❌</button>
      ${historial}
    `;
    lista.appendChild(li);
  });
}

mostrar();
</script>


</body>
</html>
